/*!
 * image-uploader - jQuery image upload plugin
 * v0.3.4
 * https://github.com/jgallen23/image-uploader/
 * copyright Greg Allen 2013
 * MIT License
*/
!function(a){var b=0,c=function(b){return a('<iframe name="'+b+'" />').attr({id:b,name:b,width:0,height:0}).css("display","none").appendTo("body")};a.fn.framejax=function(){return this.each(function(){var d=a(this);if("FORM"!=d[0].tagName)throw new Error("all selectors must be form tags");var e=function(){var e="__framejax__"+b++,f=c(e);f.on("load",function(){var b=a(this).contents().find("body").html();d.trigger("complete",b),f.remove()}),d.attr("target",e)};d.on("submit",e),d.on("framejaxSubmit",e)})}}(window.jQuery),function(a){a.fn.imageUploader=function(b){return b=a.extend({},a.fn.imageUploader.defaults,b),this.each(function(){var c=a(this),d=function(){c.html(b.progressTemplate)},e=function(a){var d=b.processData?b.processData(a):a;d&&c.html(b.completeTemplate).find("img").attr("src",d)};c.css("cursor","pointer");var f=a("<form/>").attr({action:b.action,method:b.method,enctype:"multipart/form-data"}).appendTo("body"),g=a("<input/>").attr({name:b.postKey,type:"file"}).css({opacity:"0",cursor:"pointer",position:"absolute",zIndex:b.zIndex}).on("change",function(e){var g=e.target.value,h=g.split(".").pop().toLowerCase();return-1==a.inArray(h,b.allow)?(alert("Please select a photo with a "+b.allow.join(", ")+" extension"),void 0):(c.trigger("fileSelect"),d(),f.submit(),void 0)}).appendTo(f);f.framejax().on("complete",function(a,b){e(b),c.trigger("complete",b)}),c.on("mousemove",function(a){var b=g.height(),c=g.width();"undefined"==typeof a.pageY&&"number"==typeof a.clientX&&document.documentElement&&(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop),g.css({top:a.pageY-b/2,left:a.pageX-(c-30)})})})},a.fn.imageUploader.defaults={action:window.location.href,method:"POST",postKey:"image",progressTemplate:'<div class="progress">Uploading...</div>',completeTemplate:"<img/>",allow:["jpg","png","bmp","gif","jpeg"],processData:null,zIndex:2}}(window.jQuery);