/*!
 * image-uploader - a jQuery plugin to upload images inline
 * v0.3.4
 * https://github.com/jgallen23/image-uploader
 * copyright JGA 2013
 * MIT License
*/
(function(e){e.fn.imageUploader=function(t){return t=e.extend({},e.fn.imageUploader.defaults,t),this.each(function(){var n=e(this),r=function(){n.html(t.progressTemplate)},i=function(e){var r=t.processData?t.processData(e):e;if(!r)return;n.html(t.completeTemplate).find("img").attr("src",r)};n.css("cursor","pointer");var s=e("<form/>").attr({action:t.action,method:t.method,enctype:"multipart/form-data"}).appendTo("body"),o=e("<input/>").attr({name:t.postKey,type:"file"}).css({opacity:"0",cursor:"pointer",position:"absolute",zIndex:t.zIndex}).on("change",function(i){var o=i.target.value,u=o.split(".").pop().toLowerCase();if(e.inArray(u,t.allow)==-1){alert("Please select a photo with a "+t.allow.join(", ")+" extension");return}n.trigger("fileSelect"),r(),s.submit()}).appendTo(s);s.framejax().on("complete",function(e,t){i(t),n.trigger("complete",t)}),n.on("mousemove",function(e){var t=o.height(),n=o.width();typeof e.pageY=="undefined"&&typeof e.clientX=="number"&&document.documentElement&&(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),o.css({top:e.pageY-t/2,left:e.pageX-(n-30)})})})},e.fn.imageUploader.defaults={action:window.location.href,method:"POST",postKey:"image",progressTemplate:'<div class="progress">Uploading...</div>',completeTemplate:"<img/>",allow:["jpg","png","bmp","gif","jpeg"],processData:null,zIndex:2}})(window.jQuery);