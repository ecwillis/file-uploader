/*!
 * image-uploader - jQuery image upload plugin
 * v0.3.4
 * https://github.com/jgallen23/image-uploader/
 * copyright Greg Allen 2013
 * MIT License
*/
!function(a){a.declare("imageUploader",{defaults:{action:window.location.href,method:"POST",postKey:"image",progressTemplate:'<div class="progress">Uploading...</div>',completeTemplate:"<img/>",allow:["jpg","png","bmp","gif","jpeg"],processData:null,zIndex:2},init:function(){var b=this;this.el.css("cursor","pointer");var c=a("<form/>").attr({action:this.action,method:this.method,enctype:"multipart/form-data"}).appendTo("body"),d=a("<input/>").attr({name:this.postKey,type:"file"}).css({opacity:"0",cursor:"pointer",position:"absolute",zIndex:this.zIndex}).on("change",function(d){var e=d.target.value,f=e.split(".").pop().toLowerCase();return-1==a.inArray(f,b.allow)?(alert("Please select a photo with a "+b.allow.join(", ")+" extension"),void 0):(b.el.trigger("fileSelect"),b.showProgress(),c.submit(),void 0)}).appendTo(c);c.framejax().on("complete",function(a,c){b.showComplete(c),b.el.trigger("complete",c)}),this.el.on("mousemove",function(a){var b=d.height(),c=d.width();"undefined"==typeof a.pageY&&"number"==typeof a.clientX&&document.documentElement&&(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop),d.css({top:a.pageY-b/2,left:a.pageX-(c-30)})})},showProgress:function(){this.el.html(this.progressTemplate)},showComplete:function(a){var b=this.processData?this.processData(a):a;b&&this.el.html(this.completeTemplate).find("img").attr("src",b)}})}(window.jQuery);